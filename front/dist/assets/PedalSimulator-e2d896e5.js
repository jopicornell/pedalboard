import{d as j,e as P,l as S,c as d,g as s,w as I,v as $,u as h,i as M,F as y,h as k,t as m,o as c,n as z,B as D,b as L,p as N,k as G,_ as q}from"./index-13c9d12b.js";import{u as A,a as F}from"./useFcbPedal-4fafcbd4.js";const _=b=>(N("data-v-cd793655"),b=b(),G(),b),H={class:"pedalboard grid grid-cols-1 grid-rows-[auto_auto_1fr]"},J={class:"top-bar flex justify-between items-center p-4 gap-4"},K={class:"w-full"},Q=_(()=>s("label",{for:"midi-input",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Simulator Midi Out ",-1)),W=["value"],X={class:"w-full"},Y=_(()=>s("label",{for:"midi-output",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"}," Simulator Midi In ",-1)),Z=["value"],ee=_(()=>s("button",{class:"config-icon"},"Config",-1)),ae={class:"preset-bar flex justify-center items-center h-16 mb-4 text-4xl"},oe={class:"grid-layout flex grid grid-cols-6 gap-4 p-4"},te=["onClick"],le=["onClick"],re=j({__name:"PedalSimulator",setup(b){const{midiOutputs:E,pedalMidiOutput:n,pedalMidiInput:p,midiInputs:U,onPedalEvent:V}=A(!0),a=P(0),g=P(1),{banks:u,hasDirectBank:x}=F(p,n),f=S(()=>u[a.value]),C=S(()=>x&&a.value===0?[...f.value.buttons,{name:"Return to previous bank",type:"returnToPreviousBank"}]:x&&a.value>0?[...f.value.buttons,{name:"Go to Looper",type:"returnToPreviousBank"}]:f.value.buttons),O=o=>{var t,r,l,i;const e=C.value[o];e.type==="effect"&&(e.enabled=!e.enabled,(t=n.value)==null||t.channels[e.channel].sendControlChange(e.controller,e.enabled?127:0)),e.type==="trigger"&&((r=n.value)==null||r.channels[e.channel].sendControlChange(e.controller,127)),e.type==="program"&&((l=n.value)==null||l.channels[e.channel].sendProgramChange(e.controller),u[a.value].buttons.forEach((v,T)=>{v.type==="program"&&(u[a.value].buttons[T].enabled=e===v)})),e.type==="returnToPreviousBank"&&(a.value===0?a.value=g.value:(g.value=a.value,a.value=0),(i=n.value)==null||i.channels[15].sendProgramChange(a.value))},w=()=>{var o;a.value<u.length-1?a.value++:a.value=0,(o=n.value)==null||o.channels[15].sendProgramChange(a.value)},B=()=>{var o;a.value>0?a.value--:a.value=u.length-1,(o=n.value)==null||o.channels[15].sendProgramChange(a.value)},R=o=>{var t,r;const e=o.data[1];if(o.message.type==="programchange"&&e>-1&&e<10){const l=u[a.value].buttons[e];l&&l.type==="effect"?(l.enabled=!l.enabled,console.log(`Button ${l.name} is now ${l.enabled?"enabled":"disabled"}`),(t=n.value)==null||t.channels[l.channel].sendControlChange(l.controller,l.enabled?127:0)):l&&l.type==="program"?u[a.value].buttons.forEach((i,v)=>{i.type==="program"&&(console.log("button ",l===i,u),u[a.value].buttons[v].enabled=l===i)}):e===9&&(a.value===0?a.value=g.value:(g.value=a.value,a.value=0),(r=n.value)==null||r.channels[15].sendProgramChange(a.value))}o.message.type==="programchange"&&e===14&&B(),o.message.type==="programchange"&&e===15&&w(),o.message.type==="controlchange"&&e===0&&(g.value=o.value)};return V(o=>{o.message.channel===16&&R(o),console.log(`Pedal received ${o.message.type} on channel ${o.message.channel} for controller ${o.message.dataBytes[0]} with value ${o.message.dataBytes[1]}`)}),(o,e)=>(c(),d("div",H,[s("div",J,[s("div",K,[Q,I(s("select",{class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":e[0]||(e[0]=t=>M(p)?p.value=t:null)},[(c(!0),d(y,null,k(h(U),t=>(c(),d("option",{key:t,value:t},m(t.name),9,W))),128))],512),[[$,h(p)]])]),s("div",X,[Y,I(s("select",{class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","onUpdate:modelValue":e[1]||(e[1]=t=>M(n)?n.value=t:null)},[(c(!0),d(y,null,k(h(E),t=>(c(),d("option",{key:t,value:t},m(t.name),9,Z))),128))],512),[[$,h(n)]])]),ee]),s("div",ae,m(f.value.name),1),s("div",oe,[(c(!0),d(y,null,k(C.value,(t,r)=>(c(),d(y,{key:t.name},[s("button",{class:z(["text-white 0 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:focus:ring-gray-700 dark:border-gray-700",{"bg-cyan-800 hover:bg-cyan-900":t.enabled,"bg-gray-700 hover:bg-gray-800":!t.enabled}]),style:D({order:r<5?r+6:r-6}),onClick:l=>O(r)},m(t.name),15,te),r===4||r===9?(c(),d("button",{key:0,class:"text-white bg-gray-800 hover:bg-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300 font-medium rounded-lg text-sm px-5 py-2.5 mr-2 mb-2 dark:bg-gray-800 dark:hover:bg-gray-700 dark:focus:ring-gray-700 dark:border-gray-700",style:D({order:r+1}),onClick:l=>r===4?w():B()},m(r===4?"Up":"Down"),13,le)):L("",!0)],64))),128))])]))}});const ue=q(re,[["__scopeId","data-v-cd793655"]]);export{ue as default};
